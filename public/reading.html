<!DOCTYPE html>
<html lang="en" class="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PaperRead — Reader</title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Material+Symbols+Outlined&family=Georgia:wght@400;700&display=swap" rel="stylesheet" />
  </head>
  <body class="bg-background-light text-[#333333] dark:bg-background-dark dark:text-gray-100">
    <div class="relative flex min-h-screen w-full flex-col gap-4 px-4 pb-28 pt-8 font-display">
      <header class="flex items-center justify-between gap-4">
        <button id="back-button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 px-4 py-2 text-sm font-semibold text-[#333333] hover:border-primary dark:border-zinc-800 dark:text-gray-100" type="button">
          <span class="material-symbols-outlined" aria-hidden="true">arrow_back</span>
          Library
        </button>
        <div class="flex items-center gap-2">
          <label for="provider-select" class="text-xs uppercase tracking-wider text-[#333333]/60 dark:text-gray-400">Provider</label>
          <select id="provider-select" class="rounded-full border border-gray-200 bg-white/80 px-3 py-2 text-sm dark:border-zinc-800 dark:bg-zinc-900/70">
            <option value="offline">Offline (default)</option>
            <option value="online">Online</option>
          </select>
          <button id="reader-theme-toggle" class="rounded-full border border-gray-200 p-2 text-[#333333] hover:border-primary dark:border-zinc-800 dark:text-gray-100" type="button" aria-label="Toggle theme">
            <span class="material-symbols-outlined" aria-hidden="true">dark_mode</span>
          </button>
        </div>
      </header>
      <section class="flex flex-wrap items-center gap-4 rounded-2xl border border-gray-100 bg-white/60 px-4 py-3 text-xs font-semibold uppercase tracking-wide text-[#555555]/80 shadow-sm dark:border-zinc-800 dark:bg-zinc-900/60 dark:text-gray-300">
        <div class="flex items-center gap-2 text-[11px] normal-case">
          <span>Font</span>
          <div class="inline-flex items-center gap-2 rounded-full border border-gray-200 px-2 py-1 text-[#333333] dark:border-zinc-700 dark:text-gray-100">
            <button id="font-size-down" class="px-2 text-sm" type="button" aria-label="Decrease font size">A-</button>
            <span id="font-size-label" class="w-12 text-center text-xs">100%</span>
            <button id="font-size-up" class="px-2 text-sm" type="button" aria-label="Increase font size">A+</button>
          </div>
        </div>
        <div class="flex items-center gap-2 text-[11px] normal-case">
          <span>Columns</span>
          <div class="inline-flex rounded-full border border-gray-200 text-[#333333] dark:border-zinc-700 dark:text-gray-100">
            <button type="button" data-column-mode="one" class="column-toggle px-3 py-1 text-xs" aria-pressed="false">Single</button>
            <button type="button" data-column-mode="two" class="column-toggle px-3 py-1 text-xs" aria-pressed="true">Dual</button>
          </div>
        </div>
        <div class="flex items-center gap-2 text-[11px] normal-case">
          <label for="line-height-range">Line</label>
          <input id="line-height-range" type="range" min="1.2" max="2" step="0.1" value="1.6" class="h-1 w-24 rounded-full bg-gray-200 accent-primary dark:bg-zinc-700" />
          <span id="line-height-value" class="text-xs">1.6</span>
        </div>
        <div class="flex items-center gap-2 text-[11px] normal-case">
          <label for="voice-select">Voice</label>
          <select id="voice-select" class="rounded-full border border-gray-200 bg-white/80 px-3 py-1 text-xs text-[#333333] dark:border-zinc-700 dark:bg-zinc-900/70 dark:text-gray-100">
            <option value="en_US">English (US)</option>
            <option value="en_GB">English (UK)</option>
            <option value="es_ES">Spanish</option>
          </select>
        </div>
      </section>
      <main id="reader" class="relative flex flex-1 flex-col rounded-3xl bg-white/90 px-6 py-12 shadow-2xl backdrop-blur dark:bg-zinc-900/80" aria-live="polite">
        <div class="reader-columns flex flex-col gap-6 md:grid md:grid-cols-2 md:gap-10">
          <article class="reader-column space-y-6 text-lg leading-relaxed text-[#333333] dark:text-gray-200" id="column-a"></article>
          <article class="reader-column space-y-6 text-lg leading-relaxed text-[#333333] dark:text-gray-200" id="column-b"></article>
        </div>
        <div id="loading-state" class="flex flex-col items-center gap-2 py-20 text-center text-sm text-[#333333]/70 dark:text-gray-400">
          <span class="material-symbols-outlined animate-spin text-3xl text-primary" aria-hidden="true">progress_activity</span>
          Loading book…
        </div>
        <div id="error-state" class="hidden rounded-2xl border border-rose-300 bg-rose-50/70 px-4 py-3 text-sm text-rose-900 dark:border-rose-500/50 dark:bg-rose-900/20 dark:text-rose-100" role="alert"></div>
      </main>
      <section class="fixed inset-x-0 bottom-0 z-20 border-t border-gray-200 bg-white/95 px-4 py-3 shadow-xl backdrop-blur dark:border-zinc-800 dark:bg-zinc-900/95">
        <div class="mx-auto flex max-w-5xl flex-wrap items-center justify-between gap-4">
          <button id="prev-paragraph" class="flex w-24 flex-col items-center text-xs font-medium text-[#555555] hover:text-black dark:text-gray-400 dark:hover:text-white" type="button">
            <span class="material-symbols-outlined text-2xl" aria-hidden="true">arrow_back</span>
            Prev
          </button>
          <div class="flex flex-1 flex-col items-center gap-2">
            <button id="tts-toggle" class="rounded-full bg-primary p-4 text-[#333333] shadow-lg transition hover:bg-yellow-300 dark:text-[#23210f]" type="button" aria-pressed="false" aria-label="Toggle speech playback">
              <span id="tts-icon" class="material-symbols-outlined text-4xl" aria-hidden="true">play_arrow</span>
            </button>
            <div class="flex items-center gap-2 text-xs text-[#555555] dark:text-gray-400">
              <label for="speed-range" class="uppercase tracking-wider">Speed</label>
              <input id="speed-range" type="range" min="0.8" max="2" step="0.1" value="1" class="h-1.5 w-48 rounded-full bg-gray-200 accent-primary dark:bg-zinc-700" />
              <span id="speed-value" aria-live="polite">1.0x</span>
            </div>
          </div>
          <button id="next-paragraph" class="flex w-24 flex-col items-center text-xs font-medium text-[#555555] hover:text-black dark:text-gray-400 dark:hover:text-white" type="button">
            <span class="material-symbols-outlined text-2xl" aria-hidden="true">arrow_forward</span>
            Next
          </button>
        </div>
        <p id="privacy-banner" class="mt-2 hidden text-center text-xs text-amber-700 dark:text-amber-200">Online TTS sends selected text to the configured provider.</p>
      </section>
    </div>
    <script type="module" src="/js/reader-page.js"></script>
  </body>
</html>
